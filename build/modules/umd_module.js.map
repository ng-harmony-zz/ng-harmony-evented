{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"umd_module.js","sourcesContent":["    import bean from 'fat/bean';\n    import zest from 'zest';\n    import { Controller  } from 'ng-harmony/ng-harmony';\n\n    export class StateController extends Controller {\n        constructor(...args) {\n            super(...args);\n\n            for (let [key, fn] of this.iterate(this.constructor.prototype)) {\n                if (typeof fn !== \"function\" ||\n                    !!~[\"constructor\", \"initialize\"].indexOf(key) ||\n                    !~[\"ยง\"].indexOf(key[0])) {\n                    continue;\n                }\n                ((_fn) => {\n                    this.$scope.$on(key.match(/w+/)[0], (event, state, ...args) => {\n                        if (event.defaultPrevented) {\n                            return;\n                        }\n                        else {\n                            event.preventDefault();\n                            let _args = _fn();\n                            this.$scope.$broadcast(key.match(/w+/)[1], ..._args)\n                                .then((title, ...args) => {\n                                    this.$scope.$emit(title, ...args);\n                                })\n                                .then((msg) => {\n                                    console.warn({\n                                        msg: \"Promise not fulfilled in Broadcast-Session\",\n                                        origin: this\n                                    });\n                                });\n                        }\n                    });\n                })(fn);\n            }\n        }\n    }\n\n    export class EventedController extends Controller {\n        constructor(...args) {\n            super(...args);\n\n            for (let [key, fn] of this.iterate(this.constructor.prototype)) {\n                if (typeof fn !== \"function\" ||\n                    !!~[\"constructor\", \"initialize\"].indexOf(key) ||\n                    !!~[\"_\", \"ยง\", \"$\"].indexOf(key[0])) {\n                    continue;\n                }\n                if (key.match(\"::\")) {\n                    let tokens = key.split(\"::\");\n                    if ((typeof tokens[2] !== \"undefined\" && tokens[2] !== null) && !!~tokens[2].indexOf(\"<\")) {\n                        tokens = tokens.splice(3, 0, ...tokens[2].split(\">\"));\n                    }\n                    let element = this.$element ? this.$element.context : document.body;\n                    for (let [i, el] of (tokens[0] ?\n                            zest(tokens[0], element).entries() :\n                            [element].entries())) {\n                        ((_i, _el, _fn) => {\n                            let __fn = (ev, ...args) => {\n                                if (typeof tokens[2] !== \"undefined\" && tokens[2] !== null) {\n                                    if (typeof tokens[3] !== \"undefined\" && tokens[3] !== null) {\n                                        let __el = ev.currentTarget.parentNode;\n                                        while (!zest.matches(__el, tokens[3])) { __el = __el.parentNode; }\n                                        let list = Array.prototype.slice.call(__el.parentNode.children);\n                                        this.$scope.i = list.indexOf(__el);\n                                    } else {\n                                        let __el = ev.currentTarget;\n                                        let list = Array.prototype.slice.call(__el.parentNode.children);\n                                        this.$scope.i = list.indexOf(__el);\n                                    }\n                                }\n                                _fn.call(this, ev, ...args);\n                                this.digest();\n                            }\n                            bean.on(_el, tokens[1], tokens[2] || __fn, tokens[2] ? __fn : null);\n                        })(i, el, fn);\n                    }\n                }\n            }\n        }\n    }\n    EventedController.$inject = \"$element\";"]}